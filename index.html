<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="google-site-verification" content="nKJvgUZewnu5jLIakJYwPa9sJ84Dm50HuYUGYP6aWYE" />

    <title>VibeTube - Free YouTube Video & Audio Downloader</title>
    <meta name="description" content="Download YouTube videos in 1080p, 4K, and MP3 audio for free. VibeTube is a fast, ad-free, and aesthetic downloader tool. No signup required.">
    <meta name="keywords" content="youtube downloader, mp3 converter, video downloader, free youtube to mp3, aesthetic downloader, vibetube, 1080p video download">
    <meta name="author" content="VibeTube">
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="VibeTube - Premium Video Downloader">
    <meta property="og:description" content="Download YouTube videos and audio instantly in high quality. Free and aesthetic.">
    <meta property="og:image" content="https://vibetube-frontend.vercel.app/favicon.png">
    <meta property="og:url" content="https://vibetube-frontend.vercel.app">
    <meta property="og:type" content="website">

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- GLOBAL STYLES --- */
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #0f172a; /* Dark Slate Base */
            color: #e2e8f0;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- BACKGROUND ANIMATION (Blurry Orbs) --- */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
            animation: float 10s infinite ease-in-out alternate;
        }
        .orb-1 {
            top: -10%; left: -10%; width: 500px; height: 500px;
            background: #4c1d95; /* Deep Violet */
        }
        .orb-2 {
            bottom: -10%; right: -10%; width: 400px; height: 400px;
            background: #2563eb; /* Royal Blue */
            animation-delay: -5s;
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 50px); }
        }

        /* --- GLASS CARD --- */
        .glass-card {
            background: rgba(30, 41, 59, 0.4); /* Semi-transparent dark */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* --- LIQUID GLASS BUTTONS --- */
        .liquid-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .liquid-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 
                        inset 0 0 15px rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .liquid-btn:active {
            transform: scale(0.98);
        }

        /* Primary Action Button (Gradient) */
        .primary-btn {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
        }
        .primary-btn:hover {
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.6);
        }

        /* --- LOADING BAR (Top) --- */
        #nprogress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            z-index: 9999;
        }
        #bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #60a5fa, #c084fc);
            box-shadow: 0 0 15px #c084fc;
            transition: width 0.4s ease;
        }
    </style>
</head>
<body class="p-4">

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div id="nprogress"><div id="bar"></div></div>

    <div class="w-full max-w-2xl glass-card rounded-3xl p-8 transform transition-all duration-500 ease-out animate-fade-in-up">
        
        <h1 class="text-3xl font-bold text-center mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400">
            VibeTube
        </h1>
        <p class="text-center text-slate-400 text-sm mb-8 tracking-wide">Premium Video & Audio Downloader</p>

        <div class="flex flex-col sm:flex-row gap-3 mb-8">
            <input type="text" id="url" placeholder="Paste YouTube link here..." 
                class="w-full bg-slate-900/60 text-white rounded-xl px-5 py-4 border border-slate-700 focus:border-purple-500 focus:outline-none focus:ring-1 focus:ring-purple-500 transition-all placeholder-slate-500">
            
            <button onclick="fetchInfo()" id="btn" 
                class="primary-btn text-white px-8 py-4 rounded-xl font-semibold tracking-wide transition-all whitespace-nowrap">
                Analyze
            </button>
        </div>

        <div id="loader" class="hidden flex justify-center py-10">
            <div class="animate-spin h-8 w-8 border-4 border-purple-500 border-t-transparent rounded-full"></div>
        </div>

        <div id="result" class="hidden animate-fade-in">
            <div class="flex flex-col sm:flex-row gap-6 mb-8 items-center sm:items-start">
                <img id="thumb" class="w-full sm:w-48 h-32 object-cover rounded-2xl shadow-lg ring-1 ring-white/10" src="">
                <div class="flex-1 text-center sm:text-left">
                    <h3 id="title" class="font-bold text-lg text-white leading-tight mb-2 line-clamp-2"></h3>
                    <div class="inline-block px-3 py-1 rounded-full bg-white/5 text-xs text-slate-300 border border-white/10">
                        Ready to download
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-6">
                <div class="space-y-3">
                    <div class="flex items-center justify-center gap-2 text-xs uppercase tracking-widest text-blue-400 font-bold mb-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        Video (MP4)
                    </div>
                    <div id="vList" class="space-y-3">
                        </div>
                </div>

                <div class="space-y-3">
                    <div class="flex items-center justify-center gap-2 text-xs uppercase tracking-widest text-purple-400 font-bold mb-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>
                        Audio (MP3)
                    </div>
                    <div id="aList" class="space-y-3">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // *** BACKEND CONFIGURATION ***
        // This is your live Render server URL
        const BACKEND_URL = 'https://vibetube-hxqw.onrender.com';

        // Animation Helper: Progress Bar
        function setProgress(percent) {
            const bar = document.getElementById('bar');
            bar.style.width = percent + '%';
            if (percent >= 100) {
                setTimeout(() => { bar.style.width = '0%'; }, 500);
            }
        }

        async function fetchInfo() {
            const urlInput = document.getElementById('url').value;
            if(!urlInput) {
                alert("Please paste a URL first!");
                return;
            }

            const btn = document.getElementById('btn');
            const loader = document.getElementById('loader');
            const resDiv = document.getElementById('result');

            // Reset UI
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
            loader.classList.remove('hidden');
            resDiv.classList.add('hidden');
            setProgress(30); // Start Loading Bar

            try {
                // Remove trailing slash if user added it to BACKEND_URL
                const cleanBaseUrl = BACKEND_URL.replace(/\/$/, "");
                
                const res = await fetch(`${cleanBaseUrl}/get_info`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({url: urlInput})
                });

                setProgress(70);

                const data = await res.json();
                
                if (data.error) {
                    alert("Error: " + data.error);
                } else {
                    document.getElementById('thumb').src = data.thumb;
                    document.getElementById('title').innerText = data.title;
                    
                    const vList = document.getElementById('vList');
                    // Create Liquid Buttons for Video
                    vList.innerHTML = data.video.map(v => `
                        <button onclick="downloadMedia('${urlInput}', '${v.id}', 'video')" 
                                class='liquid-btn w-full py-3 rounded-xl text-sm font-medium text-white flex justify-between px-4 group'>
                            <span>${v.res}</span>
                            <span class="text-blue-300 opacity-0 group-hover:opacity-100 transition-opacity">↓</span>
                        </button>
                    `).join('');

                    const aList = document.getElementById('aList');
                    // Create Liquid Buttons for Audio
                    aList.innerHTML = data.audio.map(a => `
                        <button onclick="downloadMedia('${urlInput}', 'bestaudio', 'mp3')" 
                                class='liquid-btn w-full py-3 rounded-xl text-sm font-medium text-white flex justify-between px-4 group'>
                            <span>${a.q}</span>
                            <span class="text-purple-300 opacity-0 group-hover:opacity-100 transition-opacity">↓</span>
                        </button>
                    `).join('');

                    resDiv.classList.remove('hidden');
                }
            } catch(e) { 
                console.error(e);
                alert('Could not connect to server. Check your Internet or Backend URL.'); 
            } finally {
                loader.classList.add('hidden');
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                setProgress(100);
            }
        }

        async function downloadMedia(url, format, mode) {
            // Start the "Fake" Loading Animation
            setProgress(10);
            const interval = setInterval(() => {
                const currentWidth = parseFloat(document.getElementById('bar').style.width);
                if (currentWidth < 90) setProgress(currentWidth + Math.random() * 5);
            }, 300);

            try {
                const cleanBaseUrl = BACKEND_URL.replace(/\/$/, "");
                const backendUrl = `${cleanBaseUrl}/download?url=${encodeURIComponent(url)}&fmt=${format}&mode=${mode}`;
                
                const response = await fetch(backendUrl);
                
                if (!response.ok) throw new Error('Download failed');

                const blob = await response.blob();
                const downloadUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = downloadUrl;
                a.download = mode === 'mp3' ? 'audio.mp3' : 'video.mp4';
                document.body.appendChild(a);
                a.click();
                a.remove();
                window.URL.revokeObjectURL(downloadUrl);

                clearInterval(interval);
                setProgress(100);

            } catch (error) {
                console.error(error);
                alert('Download Failed. The server might be busy.');
                clearInterval(interval);
                setProgress(0);
            }
        }
    </script>
</body>
</html>
